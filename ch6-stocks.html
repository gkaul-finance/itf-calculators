<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 6: Stock Valuation Calculator | Introduction to Finance</title>
    <style>
        :root { --primary: #00274C; --secondary: #FFCB05; --accent: #2196F3; --success: #4CAF50; --warning: #FF9800; --light: #f8f9fa; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh; padding: 20px; line-height: 1.6; }
        .container { max-width: 900px; margin: 0 auto; }
        header { background: var(--primary); color: white; padding: 2rem; border-radius: 12px 12px 0 0; text-align: center; }
        header h1 { font-size: 1.8rem; margin-bottom: 0.5rem; }
        .chapter-badge { background: var(--secondary); color: var(--primary); padding: 4px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; display: inline-block; margin-bottom: 1rem; }
        .main-content { background: white; padding: 2rem; border-radius: 0 0 12px 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .tabs { display: flex; gap: 10px; margin-bottom: 2rem; flex-wrap: wrap; }
        .tab-btn { padding: 12px 24px; border: 2px solid var(--primary); background: white; color: var(--primary); border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 500; }
        .tab-btn:hover { background: var(--light); }
        .tab-btn.active { background: var(--primary); color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .calculator-section { background: var(--light); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; }
        .calculator-section h3 { color: var(--primary); margin-bottom: 1rem; }
        .input-group { margin-bottom: 1rem; }
        .input-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        .input-group input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem; }
        .input-group input:focus { outline: none; border-color: var(--accent); }
        .input-group small { color: #666; font-size: 0.85rem; }
        .input-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; }
        .result-box { background: linear-gradient(135deg, var(--primary) 0%, #003366 100%); color: white; padding: 2rem; border-radius: 12px; text-align: center; margin: 1.5rem 0; }
        .result-label { font-size: 1rem; opacity: 0.9; margin-bottom: 0.5rem; }
        .result-value { font-size: 2.5rem; font-weight: 700; }
        .result-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .result-item { background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; }
        .result-item-label { font-size: 0.8rem; opacity: 0.8; }
        .result-item-value { font-size: 1.2rem; font-weight: 600; }
        .formula-box { background: #e3f2fd; border-left: 4px solid var(--accent); padding: 1rem 1.5rem; margin: 1rem 0; border-radius: 0 8px 8px 0; }
        .insight-box { background: #fff3e0; border-left: 4px solid var(--warning); padding: 1rem 1.5rem; margin: 1rem 0; border-radius: 0 8px 8px 0; }
        .insight-box h4 { color: var(--warning); margin-bottom: 0.5rem; }
        footer { text-align: center; padding: 2rem; color: #666; }
        footer a { color: var(--primary); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="chapter-badge">Chapter 6</div>
            <h1>Stock Valuation Calculator</h1>
            <p>Dividend Discount Model & Gordon Growth</p>
        </header>
        
        <div class="main-content">
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('constant')">Constant Dividend</button>
                <button class="tab-btn" onclick="showTab('gordon')">Gordon Growth</button>
                <button class="tab-btn" onclick="showTab('multistage')">Two-Stage Growth</button>
                <button class="tab-btn" onclick="showTab('reverse')">Implied Return</button>
            </div>
            
            <!-- Constant Dividend -->
            <div id="constant" class="tab-content active">
                <div class="calculator-section">
                    <h3>Constant Dividend Model (Zero Growth)</h3>
                    <p>Value a stock that pays the same dividend forever</p>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Annual Dividend ($)</label>
                            <input type="number" id="const-div" value="2" step="0.01" oninput="calculateConstant()">
                            <small>Dividend per share</small>
                        </div>
                        <div class="input-group">
                            <label>Required Return (%)</label>
                            <input type="number" id="const-r" value="10" step="0.1" oninput="calculateConstant()">
                            <small>Your required rate of return</small>
                        </div>
                    </div>
                </div>
                
                <div class="result-box">
                    <div class="result-label">Stock Value (Price)</div>
                    <div class="result-value" id="const-result">$20.00</div>
                    <div class="result-grid">
                        <div class="result-item">
                            <div class="result-item-label">Dividend Yield</div>
                            <div class="result-item-value" id="const-yield">10.00%</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-label">Capital Gain Yield</div>
                            <div class="result-item-value">0.00%</div>
                        </div>
                    </div>
                </div>
                
                <div class="formula-box">
                    <strong>Formula (Perpetuity):</strong><br>
                    <code>P‚ÇÄ = D / r</code>
                </div>
                
                <div class="insight-box">
                    <h4>üí° Key Insight</h4>
                    <p>This is just a perpetuity! A stock paying $2 forever is worth $20 if you require 10%. All your return comes from dividends (no growth).</p>
                </div>
            </div>
            
            <!-- Gordon Growth -->
            <div id="gordon" class="tab-content">
                <div class="calculator-section">
                    <h3>Gordon Growth Model (Constant Growth)</h3>
                    <p>Value a stock with dividends growing at a constant rate forever</p>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Current Dividend D‚ÇÄ ($)</label>
                            <input type="number" id="gordon-d0" value="2" step="0.01" oninput="calculateGordon()">
                            <small>Most recent dividend paid</small>
                        </div>
                        <div class="input-group">
                            <label>Growth Rate g (%)</label>
                            <input type="number" id="gordon-g" value="5" step="0.1" oninput="calculateGordon()">
                            <small>Must be less than r</small>
                        </div>
                        <div class="input-group">
                            <label>Required Return r (%)</label>
                            <input type="number" id="gordon-r" value="12" step="0.1" oninput="calculateGordon()">
                        </div>
                    </div>
                </div>
                
                <div class="result-box">
                    <div class="result-label">Stock Value (Price)</div>
                    <div class="result-value" id="gordon-result">$30.00</div>
                    <div class="result-grid">
                        <div class="result-item">
                            <div class="result-item-label">Next Dividend (D‚ÇÅ)</div>
                            <div class="result-item-value" id="gordon-d1">$2.10</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-label">Dividend Yield</div>
                            <div class="result-item-value" id="gordon-yield">7.00%</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-label">Capital Gain Yield</div>
                            <div class="result-item-value" id="gordon-capgain">5.00%</div>
                        </div>
                    </div>
                </div>
                
                <div class="formula-box">
                    <strong>Gordon Growth Formula:</strong><br>
                    <code>P‚ÇÄ = D‚ÇÅ / (r - g) = D‚ÇÄ(1+g) / (r - g)</code>
                </div>
                
                <div class="insight-box">
                    <h4>üí° Key Insight</h4>
                    <p id="gordon-insight">Your 12% total return comes from two sources: 7% dividend yield + 5% capital gains (from growth). The price grows at the same rate as dividends!</p>
                </div>
            </div>
            
            <!-- Two-Stage Growth -->
            <div id="multistage" class="tab-content">
                <div class="calculator-section">
                    <h3>Two-Stage Growth Model</h3>
                    <p>High growth phase followed by stable growth forever</p>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Current Dividend D‚ÇÄ ($)</label>
                            <input type="number" id="two-d0" value="1" step="0.01" oninput="calculateTwoStage()">
                        </div>
                        <div class="input-group">
                            <label>Required Return r (%)</label>
                            <input type="number" id="two-r" value="15" step="0.1" oninput="calculateTwoStage()">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group">
                            <label>High Growth Rate (%)</label>
                            <input type="number" id="two-g1" value="25" step="1" oninput="calculateTwoStage()">
                        </div>
                        <div class="input-group">
                            <label>High Growth Years</label>
                            <input type="number" id="two-n" value="5" oninput="calculateTwoStage()">
                        </div>
                        <div class="input-group">
                            <label>Stable Growth Rate (%)</label>
                            <input type="number" id="two-g2" value="5" step="0.5" oninput="calculateTwoStage()">
                        </div>
                    </div>
                </div>
                
                <div class="result-box">
                    <div class="result-label">Stock Value</div>
                    <div class="result-value" id="two-result">$24.18</div>
                    <div class="result-grid">
                        <div class="result-item">
                            <div class="result-item-label">PV High Growth</div>
                            <div class="result-item-value" id="two-pv1">$5.89</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-label">PV Terminal</div>
                            <div class="result-item-value" id="two-pv2">$18.29</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-label">Terminal Value</div>
                            <div class="result-item-value" id="two-terminal">$36.77</div>
                        </div>
                    </div>
                </div>
                
                <div class="insight-box">
                    <h4>üí° Real-World Application</h4>
                    <p>Young, fast-growing companies can't grow at 25% forever. This model captures high initial growth that eventually settles to a sustainable rate.</p>
                </div>
            </div>
            
            <!-- Implied Return -->
            <div id="reverse" class="tab-content">
                <div class="calculator-section">
                    <h3>Implied Required Return</h3>
                    <p>What return is the market expecting?</p>
                    
                    <div class="input-row">
                        <div class="input-group">
                            <label>Current Stock Price ($)</label>
                            <input type="number" id="rev-price" value="50" step="0.01" oninput="calculateImplied()">
                        </div>
                        <div class="input-group">
                            <label>Next Year's Dividend D‚ÇÅ ($)</label>
                            <input type="number" id="rev-d1" value="2" step="0.01" oninput="calculateImplied()">
                        </div>
                        <div class="input-group">
                            <label>Expected Growth Rate (%)</label>
                            <input type="number" id="rev-g" value="6" step="0.1" oninput="calculateImplied()">
                        </div>
                    </div>
                </div>
                
                <div class="result-box">
                    <div class="result-label">Implied Required Return</div>
                    <div class="result-value" id="rev-result">10.00%</div>
                    <div class="result-grid">
                        <div class="result-item">
                            <div class="result-item-label">Dividend Yield</div>
                            <div class="result-item-value" id="rev-yield">4.00%</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-label">+ Growth Rate</div>
                            <div class="result-item-value" id="rev-growth">6.00%</div>
                        </div>
                    </div>
                </div>
                
                <div class="formula-box">
                    <strong>Rearranged Gordon Formula:</strong><br>
                    <code>r = (D‚ÇÅ / P‚ÇÄ) + g = Dividend Yield + Growth Rate</code>
                </div>
                
                <div class="insight-box">
                    <h4>üí° Investment Analysis</h4>
                    <p id="rev-insight">The market expects a 10% return on this stock. If your required return is higher, the stock is overpriced for you. If lower, it's a potential buy!</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p><strong>Introduction to Finance</strong> | Professor Gautam Kaul | University of Michigan Ross School of Business</p>
            <p><a href="index.html">‚Üê Back to All Calculators</a></p>
        </footer>
    </div>
    
    <script>
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        function formatCurrency(value) { return '$' + value.toFixed(2); }
        function formatPercent(value) { return value.toFixed(2) + '%'; }
        
        function calculateConstant() {
            const div = parseFloat(document.getElementById('const-div').value) || 0;
            const r = parseFloat(document.getElementById('const-r').value) / 100 || 0.01;
            const price = div / r;
            document.getElementById('const-result').textContent = formatCurrency(price);
            document.getElementById('const-yield').textContent = formatPercent(r * 100);
        }
        
        function calculateGordon() {
            const d0 = parseFloat(document.getElementById('gordon-d0').value) || 0;
            const g = parseFloat(document.getElementById('gordon-g').value) / 100 || 0;
            const r = parseFloat(document.getElementById('gordon-r').value) / 100 || 0.01;
            
            if (r <= g) { document.getElementById('gordon-result').textContent = 'r must > g'; return; }
            
            const d1 = d0 * (1 + g);
            const price = d1 / (r - g);
            const divYield = (d1 / price) * 100;
            
            document.getElementById('gordon-result').textContent = formatCurrency(price);
            document.getElementById('gordon-d1').textContent = formatCurrency(d1);
            document.getElementById('gordon-yield').textContent = formatPercent(divYield);
            document.getElementById('gordon-capgain').textContent = formatPercent(g * 100);
            document.getElementById('gordon-insight').textContent = `Your ${formatPercent(r*100)} total return comes from two sources: ${formatPercent(divYield)} dividend yield + ${formatPercent(g*100)} capital gains. The price grows at the same rate as dividends!`;
        }
        
        function calculateTwoStage() {
            const d0 = parseFloat(document.getElementById('two-d0').value) || 0;
            const r = parseFloat(document.getElementById('two-r').value) / 100 || 0.15;
            const g1 = parseFloat(document.getElementById('two-g1').value) / 100 || 0;
            const n = parseInt(document.getElementById('two-n').value) || 5;
            const g2 = parseFloat(document.getElementById('two-g2').value) / 100 || 0;
            
            let pvHighGrowth = 0;
            let lastDiv = d0;
            for (let t = 1; t <= n; t++) {
                lastDiv = d0 * Math.pow(1 + g1, t);
                pvHighGrowth += lastDiv / Math.pow(1 + r, t);
            }
            
            const terminalDiv = lastDiv * (1 + g2);
            const terminalValue = terminalDiv / (r - g2);
            const pvTerminal = terminalValue / Math.pow(1 + r, n);
            const totalPrice = pvHighGrowth + pvTerminal;
            
            document.getElementById('two-result').textContent = formatCurrency(totalPrice);
            document.getElementById('two-pv1').textContent = formatCurrency(pvHighGrowth);
            document.getElementById('two-pv2').textContent = formatCurrency(pvTerminal);
            document.getElementById('two-terminal').textContent = formatCurrency(terminalValue);
        }
        
        function calculateImplied() {
            const price = parseFloat(document.getElementById('rev-price').value) || 1;
            const d1 = parseFloat(document.getElementById('rev-d1').value) || 0;
            const g = parseFloat(document.getElementById('rev-g').value) / 100 || 0;
            
            const divYield = d1 / price;
            const impliedR = divYield + g;
            
            document.getElementById('rev-result').textContent = formatPercent(impliedR * 100);
            document.getElementById('rev-yield').textContent = formatPercent(divYield * 100);
            document.getElementById('rev-growth').textContent = formatPercent(g * 100);
            document.getElementById('rev-insight').textContent = `The market expects a ${formatPercent(impliedR*100)} return on this stock. If your required return is higher, the stock is overpriced for you. If lower, it's a potential buy!`;
        }
        
        calculateConstant(); calculateGordon(); calculateTwoStage(); calculateImplied();
    </script>
</body>
</html>
